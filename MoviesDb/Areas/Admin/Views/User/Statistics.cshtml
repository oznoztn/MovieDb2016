@model int

@{
    ViewBag.Title = "Statistics";
}

<div class="page-head">
    <!-- BEGIN PAGE TITLE -->
    <div class="page-title">
        <h1>
            Movie <small>Complete list of available genres</small>
        </h1>
    </div>
    <!-- END PAGE TITLE -->
</div>

<div class="row">
    <div class="col-md-12">
        <!-- BEGIN CHART PORTLET-->
        <div class="portlet light bordered">
            <div class="portlet-title">
                <div class="caption">
                    <i class="icon-bar-chart font-green-haze"></i>
                    <span class="caption-subject bold uppercase font-green-haze">Movies</span>
                    <span class="caption-helper">by Genre</span>
                </div>
                <div class="tools">
                    <a href="javascript:;" class="collapse">
                    </a>
                    <a href="javascript:;" class="fullscreen">
                    </a>
                </div>
            </div>
            <div class="portlet-body" id="chartdiv" style="width: 100%; height: 450px">
                <button type="button" id="btnChart" class="btn btn-primary">
                    Get data
                </button>
            </div>
        </div>
        <!-- END CHART PORTLET-->
    </div>
</div>

<div class="row">
    <div class="col-md-6">
        <!-- BEGIN CHART PORTLET-->
        <div class="portlet light bordered">
            <div class="portlet-title">
                <div class="caption">
                    <i class="icon-bar-chart font-green-haze"></i>
                    <span class="caption-subject bold uppercase font-green-haze">Movies</span>
                    <span class="caption-helper">by Year</span>
                </div>
                <div class="tools">
                    <a href="javascript:;" class="collapse">
                    </a>
                    <a href="javascript:;" class="fullscreen">
                    </a>
                </div>
            </div>
            <div class="portlet-body" id="chartdiv2" style="width: 100%; height: 449px">
                <button type="button" id="btnChart2" class="btn btn-primary">
                    Get data
                </button>
            </div>
        </div>
        <!-- END CHART PORTLET-->
    </div>

    <div class="col-md-6">
        <!-- BEGIN CHART PORTLET-->
        <div class="portlet light bordered">
            <div class="portlet-title">
                <div class="caption">
                    <i class="icon-bar-chart font-green-haze"></i>
                    <span class="caption-subject bold uppercase font-green-haze">Movies</span>
                    <span class="caption-helper">by Year</span>
                </div>
                <div class="tools">
                    <a href="javascript:;" class="collapse">
                    </a>
                    <a href="javascript:;" class="fullscreen">
                    </a>
                </div>
            </div>
            <div class="portlet-body" id="chartdiv3" style="width: 100%; height: 449px">
                <button type="button" id="btnChart3" class="btn btn-primary">
                    Get data
                </button>
            </div>
        </div>
        <!-- END CHART PORTLET-->
    </div>
</div>

<div class="row">
    <div class="col-md-6">
        <!-- BEGIN CHART PORTLET-->
        <div class="portlet light bordered">
            <div class="portlet-title">
                <div class="caption">
                    <i class="icon-bar-chart font-green-haze"></i>
                    <span class="caption-subject bold uppercase font-green-haze">TOP 25 Directors</span>
                    <span class="caption-helper">based on the rated movies</span>
                </div>
                <div class="tools">
                    <a href="javascript:;" class="collapse">
                    </a>
                    <a href="javascript:;" class="fullscreen">
                    </a>
                </div>
            </div>
            <div class="portlet-body" id="chartdiv4" style="width: 100%; height: 449px">
                <button type="button" id="btnChart4" class="btn btn-primary">
                    Get data
                </button>
            </div>
        </div>
        <!-- END CHART PORTLET-->
    </div>

    <div class="col-md-6">
        <!-- BEGIN CHART PORTLET-->
        <div class="portlet light bordered">
            <div class="portlet-title">
                <div class="caption">
                    <i class="icon-bar-chart font-green-haze"></i>
                    <span class="caption-subject bold uppercase font-green-haze">TOP 25 Actors</span>
                    <span class="caption-helper">based on the rated movies</span>
                </div>
                <div class="tools">
                    <a href="javascript:;" class="collapse">
                    </a>
                    <a href="javascript:;" class="fullscreen">
                    </a>
                </div>
            </div>
            <div class="portlet-body" id="chartdiv5" style="width: 100%; height: 449px">
                <button type="button" id="btnChart5" class="btn btn-primary">
                    Get data
                </button>
            </div>
        </div>
        <!-- END CHART PORTLET-->
    </div>
</div>

@section footerScripts{
<script src="~/Areas/Admin/Content/amcharts/amcharts.js"></script>
<script src="~/Areas/Admin/Content/amcharts/serial.js"></script>
<script src="~/Areas/Admin/Content/amcharts/themes/light.js"></script>
    <script>
    $(document).ready(function () {
        $('#btnChart').on("click", function () {
            $.ajax({
                type: "get",
                url: "/admin/user/Statistics_RatedMoviesByGenre",
                data: {id : @Model},
                dataType: "json",
                success: function(response) {
                    if (!jQuery.isEmptyObject(response)) {
                        AmCharts.makeChart("chartdiv", {
                            "type": "serial",
                            "theme": "light",
                            "categoryField": "Genre",
                            "rotate": true,
                            "startDuration": 1,
                            "categoryAxis": {
                                "gridPosition": "start",
                                "position": "left"
                            },

                            "trendLines": [],
                            "graphs": [
                                {
                                    "balloonText": "Movie:[[value]]",
                                    "fillAlphas": 0.8,
                                    "id": "AmGraph-1",
                                    "lineAlpha": 0.2,
                                    "title": "Income",
                                    "type": "column",
                                    "valueField": "Count"
                                }
                            ],
                            "guides": [],
                            "valueAxes": [
                                {
                                    "id": "ValueAxis-1",
                                    "position": "top",
                                    "axisAlpha": 0
                                }
                            ],
                            "allLabels": [],
                            "balloon": {},
                            "titles": [],
                            "dataProvider": response,
                            "export": {
                                "enabled": true
                            }
                        });
                        $('#btnChart').addClass("hidden");
                    } else {
                        $('#chartdiv').append('<p class="text-info text-left h4"> No data to display. </p>')
                        $('#btnChart').addClass("hidden");
                    }
                },
                error: function(error) {
                    $('#chartdiv').append('<p class="text-danger text-left h4"> Something went wrong. </p>')
                    $('#btnChart').addClass("hidden");
                }
            });
        });

        $('#btnChart2').on("click", function () {
            $.ajax({
                type: "get",
                url: "/admin/user/Statistics_RatedMoviesByYear",
                dataType: "json",
                data: { id: @Model },
                success: function (response) {
                    if (!jQuery.isEmptyObject(response)) {
                        AmCharts.makeChart("chartdiv2", {
                            "type": "serial",
                            "theme": "light",
                            "dataProvider": response,
                            "valueAxes": [
                                {
                                    "gridColor": "#FFFFFF",
                                    "gridAlpha": 0.1,
                                    "dashLength": 0
                                }
                            ],
                            "gridAboveGraphs": true,
                            "startDuration": 1,
                            "graphs": [
                                {
                                    "balloonText": "[[category]]: <b>[[value]]</b>",
                                    "fillAlphas": 0.8,
                                    "lineAlpha": 0.2,
                                    "type": "column",
                                    "valueField": "Count"
                                }
                            ],
                            "chartCursor": {
                                "categoryBalloonEnabled": false,
                                "cursorAlpha": 0,
                                "zoomable": false
                            },
                            "categoryField": "Year",
                            "categoryAxis": {
                                "gridPosition": "start",
                                "gridAlpha": 0,
                                "tickPosition": "start",
                                "tickLength": 20
                            },
                            "export": {
                                "enabled": true
                            }
                        });
                        $('#btnChart2').addClass("hidden");
                    } else {
                        $('#chartdiv2').append('<p class="text-info text-left h4"> No data to display. </p>')
                        $('#btnChart2').addClass("hidden");
                    }
                },
                error: function (error) {
                    $('#chartdiv2').append('<p class="text-danger text-left h4"> Something went wrong. </p>')
                    $('#btnChart2').addClass("hidden");
                }
            });
        });

        $('#btnChart3').on("click", function () {
            $.ajax({
                type: "get",
                url: "/admin/user/Statistics_RatingDistrubition",
                dataType: "json",
                data: {id : @Model},
                success: function (response) {
                    if (!jQuery.isEmptyObject(response)) {
                        AmCharts.makeChart("chartdiv3", {
                            "type": "serial",
                            "theme": "light",
                            "dataProvider": response,
                            "valueAxes": [
                                {
                                    "gridColor": "#FFFFFF",
                                    "gridAlpha": 0.1,
                                    "dashLength": 0
                                }
                            ],
                            "gridAboveGraphs": true,
                            "startDuration": 1,
                            "graphs": [
                                {
                                    "balloonText": "[[category]]: <b>[[value]]</b>",
                                    "fillAlphas": 0.8,
                                    "lineAlpha": 0.2,
                                    "type": "column",
                                    "valueField": "Count"
                                }
                            ],
                            "chartCursor": {
                                "categoryBalloonEnabled": false,
                                "cursorAlpha": 0,
                                "zoomable": false
                            },
                            "categoryField": "Rate",
                            "categoryAxis": {
                                "gridPosition": "start",
                                "gridAlpha": 0,
                                "tickPosition": "start",
                                "tickLength": 20
                            },
                            "export": {
                                "enabled": true
                            }
                        });
                        $('#btnChart3').addClass("hidden");
                    } else {
                        $('#chartdiv3').append('<p class="text-info text-left h4"> No data to display. </p>')
                        $('#btnChart3').addClass("hidden");
                    }
                },
                error: function (error) {
                    $('#chartdiv3').append('<p class="text-danger text-left h4"> Something went wrong. </p>')
                    $('#btnChart3').addClass("hidden");
                }
            });
        });

        $('#btnChart4').on("click", function () {
            $.ajax({
                type: "get",
                url: "/admin/user/Statistics_Top10Directors",
                dataType: "json",
                data: {id : @Model},
                success: function (response) {
                    if (!jQuery.isEmptyObject(response)) {
                        AmCharts.makeChart("chartdiv4", {
                            "type": "serial",
                            "theme": "light",
                            "dataProvider": response,
                            "valueAxes": [
                                {
                                    "gridColor": "#FFFFFF",
                                    "gridAlpha": 0.1,
                                    "dashLength": 0
                                }
                            ],
                            "gridAboveGraphs": true,
                            "startDuration": 1,
                            "graphs": [
                                {
                                    "balloonText": "[[category]]: <b>[[value]]</b>",
                                    "fillAlphas": 0.8,
                                    "lineAlpha": 0.2,
                                    "type": "column",
                                    "valueField": "Count"
                                }
                            ],
                            "chartCursor": {
                                "categoryBalloonEnabled": false,
                                "cursorAlpha": 0,
                                "zoomable": false
                            },
                            "categoryField": "Genre",
                            "categoryAxis": {
                                "gridPosition": "start",
                                "gridAlpha": 0,
                                "tickPosition": "start",
                                "tickLength": 20,
                                "labelsEnabled": false
                            },
                            "export": {
                                "enabled": true
                            }
                        });
                        $('#btnChart4').addClass("hidden");
                    } else {
                        $('#chartdiv4').append('<p class="text-info text-left h4"> No data to display. </p>')
                        $('#btnChart4').addClass("hidden");
                    }
                },
                error: function (error) {
                    $('#chartdiv4').append('<p class="text-danger text-left h4"> Something went wrong. </p>')
                    $('#btnChart4').addClass("hidden");
                }
            });
        });

        $('#btnChart5').on("click", function () {
            $.ajax({
                type: "get",
                url: "/admin/user/Statistics_Top10Actors",
                dataType: "json",
                data: {id : @Model},
                success: function (response) {
                    if (!jQuery.isEmptyObject(response)) {
                        AmCharts.makeChart("chartdiv5", {
                            "type": "serial",
                            "theme": "light",
                            "dataProvider": response,
                            "valueAxes": [
                                {
                                    "gridColor": "#FFFFFF",
                                    "gridAlpha": 0.1,
                                    "dashLength": 0,
                                }
                            ],
                            "gridAboveGraphs": true,
                            "startDuration": 1,
                            "graphs": [
                                {
                                    "balloonText": "[[category]]: <b>[[value]]</b>",
                                    "fillAlphas": 0.8,
                                    "lineAlpha": 0.2,
                                    "type": "column",
                                    "valueField": "Count"
                                }
                            ],
                            "chartCursor": {
                                "categoryBalloonEnabled": false,
                                "cursorAlpha": 0,
                                "zoomable": false
                            },
                            "categoryField": "Genre",
                            "categoryAxis": {
                                "gridPosition": "start",
                                "gridAlpha": 0,
                                "tickPosition": "start",
                                "tickLength": 20,
                                "labelsEnabled": false
                            },
                            "export": {
                                "enabled": true
                            }
                        });
                        $('#btnChart5').addClass("hidden");
                    } else {
                        $('#chartdiv5').append('<p class="text-info text-left h4"> No data to display. </p>')
                        $('#btnChart5').addClass("hidden");
                    }
                },
                error: function (error) {
                    $('#chartdiv5').append('<p class="text-danger text-left h4"> Something went wrong. </p>')
                    $('#btnChart5').addClass("hidden");
                }
            });
        });

    });

    </script>
}

